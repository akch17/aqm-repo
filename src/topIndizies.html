<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
    <div class="pos-f-t">
        <div class="collapse" id="navbarToggleExternalContent">
            <div class="bg-dark p-4">
                <h5 class="text-white h4">Collapsed content</h5>
                <span class="text-muted">Toggleable via the navbar brand.</span>
            </div>
        </div>
        <nav class="navbar navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="#"><img src="iconAqm.png" width="110" height="50"
                        class="d-inline-block align-top"></a><a class="navbar-brand" href="index.html">Startseite</a><a
                    class="navbar-brand" href="topIndizies.html">Top Indizies</a> <a class="navbar-brand"
                    href="topRohstoffe.html">Top Rohstoffe</a> <a class="navbar-brand" href="topWaehrung.html">Top
                    W채hrung</a> <a class="navbar-brand" href="watchList.html">Watchlist</a><a class="navbar-brand"
                    href="News.html">Newsticker</a>
            </div>
        </nav>
    </div>
    <br>


    <div class="container">
        <h3>Top Indizies</h3>

        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th scope="col">Nr.</th>
                    <th scope="col">Name</th>
                    <th scope="col">Kurs</th>
                    <th scope="col">Schwankung +/- 24h</th>
                    <th scope="col">Schwankung +/- 7d</th>
                    <th scope="col">Watchliste</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">1</th>
                    <td>GDaxi</td>
                    <td>DAX</td>
                    <td>13.200</td>
                    <td>26.788</td>
                    <td><input type="checkbox"></td>
                </tr>

                <tr>
                    <th scope="row">2</th>
                    <td>MDAXI</td>
                    <td>MDAX</td>
                    <td>26.777</td>
                    <td>26.788</td>
                    <td><input type="checkbox"></td>

                </tr>

                <tr>
                    <th scope="row">3</th>
                    <td>DAX</td>
                    <td>DAXX</td>
                    <td>25.757</td>
                    <td>26.788</td>
                    <td><input type="checkbox"></td>

                </tr>

                <tr>

                    <th scope="row">4</th>
                    <td>MAX</td>
                    <td>MAXXX</td>
                    <td>26.788</td>
                    <td>26.788</td>
                    <td><input type="checkbox"></td>
                </tr>

            </tbody>
        </table>

        <div class="form-group">
            <label for="exampleFormControlTextarea1">Ausgew채hlt f체r die
                Watchlist: </label>
            <textarea id="text" class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>
    </div>


    <div class="container">
        <a href="index.html" value="Zur Startseite" class="btn btn-dark">
            Zur체ck zur Startseite</a>
    </div>

    <script>
        const urlDE = 'https://apidojo-yahoo-finance-v1.p.rapidapi.com/market/get-summary?region=DE&lang=de';
        const urlEN = 'https://apidojo-yahoo-finance-v1.p.rapidapi.com/market/get-summary?region=EN&lang=en';
        const urlHK = 'https://apidojo-yahoo-finance-v1.p.rapidapi.com/market/get-summary?region=HK&lang=de';

        const options = {
            "method": "GET",
            "headers": {
                "x-rapidapi-host": "apidojo-yahoo-finance-v1.p.rapidapi.com",
                "x-rapidapi-key": "e9dbd04f89msh222ea9e305d5605p193ba2jsn983676bee539"
            }
        }

        async function fetchData(url, options) {
            return await fetch(url, options)
                .then(response => {
                    return response.json();
                })
                .catch(e => {
                    console.log(e);
                })
        }

        const responseDe = fetchData(urlDE, options)
            .then(response => {

                let dax = {
                    symbol: response.marketSummaryResponse.result[0].symbol,
                    name: response.marketSummaryResponse.result[0].fullExchangeName,
                    price: response.marketSummaryResponse.result[0].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[0].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[0].regularMarketChangePercent.fmt
                }

                let texDax = {
                    symbol: response.marketSummaryResponse.result[9].symbol,
                    name: response.marketSummaryResponse.result[9].fullExchangeName,
                    price: response.marketSummaryResponse.result[9].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[9].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[9].regularMarketChangePercent.fmt
                }

                let euroStoxx40 = {
                    symbol: response.marketSummaryResponse.result[1].symbol,
                    name: response.marketSummaryResponse.result[1].fullExchangeName,
                    price: response.marketSummaryResponse.result[1].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[1].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[1].regularMarketChangePercent.fmt
                }

                let mdax = {
                    symbol: response.marketSummaryResponse.result[8].symbol,
                    name: response.marketSummaryResponse.result[8].fullExchangeName,
                    price: response.marketSummaryResponse.result[8].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[8].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[8].regularMarketChangePercent.fmt
                }

                console.log({dax, texDax,euroStoxx40, mdax })
            });

        const responseEn = fetchData(urlEN, options)
            .then(response => {

                let dowJones = {
                    symbol: response.marketSummaryResponse.result[1].symbol,
                    name: response.marketSummaryResponse.result[1].fullExchangeName,
                    price: response.marketSummaryResponse.result[1].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[1].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[1].regularMarketChangePercent.fmt
                }

                let sp500 = {
                    symbol: response.marketSummaryResponse.result[0].symbol,
                    name: response.marketSummaryResponse.result[0].fullExchangeName,
                    price: response.marketSummaryResponse.result[0].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[0].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[0].regularMarketChangePercent.fmt
                }

                let nikkei225 = {
                    symbol: response.marketSummaryResponse.result[15].symbol,
                    name: response.marketSummaryResponse.result[15].fullExchangeName,
                    price: response.marketSummaryResponse.result[15].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[15].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[15].regularMarketChangePercent.fmt
                }

                let nasdaq = {
                    symbol: response.marketSummaryResponse.result[2].symbol,
                    name: response.marketSummaryResponse.result[2].fullExchangeName,
                    price: response.marketSummaryResponse.result[2].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[2].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[2].regularMarketChangePercent.fmt
                }

                let ftse100 = {
                    symbol: response.marketSummaryResponse.result[14].symbol,
                    name: response.marketSummaryResponse.result[14].fullExchangeName,
                    price: response.marketSummaryResponse.result[14].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[14].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[14].regularMarketChangePercent.fmt
                }

                console.log({dowJones, sp500, nikkei225, nasdaq, ftse100})
            });

            const responseHk = fetchData(urlHK, options)
            .then(response => {

                let hangSeng  = {
                    symbol: response.marketSummaryResponse.result[2].symbol,
                    name: response.marketSummaryResponse.result[2].fullExchangeName,
                    price: response.marketSummaryResponse.result[2].regularMarketPrice.fmt,
                    changes: response.marketSummaryResponse.result[2].regularMarketChange.fmt,
                    variation: response.marketSummaryResponse.result[2].regularMarketChangePercent.fmt
                }

                console.log({hangSeng})
            });
    </script>

</body>

</html>
